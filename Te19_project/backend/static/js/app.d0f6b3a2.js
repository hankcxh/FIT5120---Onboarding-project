(function(){"use strict";var e={7433:function(e,t,a){var r=a(3751),o=a(641);const s={id:"app"};function n(e,t,a,r,n,i){const l=(0,o.g2)("router-view");return(0,o.uX)(),(0,o.CE)("div",s,[(0,o.bF)(l)])}var i=a(4335);const l={apiUrl:"http://127.0.0.1:8000",environment:"development"};var c=l;const d=i.A.create({baseURL:c.apiUrl,timeout:1e4}),p={getParkingData:()=>d.get("/api/parking/"),getInsights:()=>d.get("/api/insights/")};var u={name:"App",async mounted(){console.log("API URL:",c.apiUrl);try{const e=await p.getParkingData();console.log("Data:",e.data)}catch(e){console.error("API Error:",e)}}},h=a(6262);const g=(0,h.A)(u,[["render",n]]);var m=g,b=a(5220);const k={class:"home-page"},f={class:"hero"};function v(e,t,a,r,s,n){const i=(0,o.g2)("HeaderBar"),l=(0,o.g2)("router-link");return(0,o.uX)(),(0,o.CE)("div",k,[(0,o.bF)(i),(0,o.Lk)("section",f,[t[1]||(t[1]=(0,o.Lk)("h1",null,"Smart commuting, greening Melbourne",-1)),t[2]||(t[2]=(0,o.Lk)("p",null,"Get instant parking and commuting information to create a green city",-1)),(0,o.bF)(l,{to:"/insights",class:"cta-button"},{default:(0,o.k6)(()=>t[0]||(t[0]=[(0,o.eW)("Get started",-1)])),_:1,__:[0]})])])}var y=a.p+"img/logo.4156aa30.png";const L={class:"header-bar"},x={class:"nav"},w={class:"nav-links"};function C(e,t,a,r,s,n){const i=(0,o.g2)("router-link");return(0,o.uX)(),(0,o.CE)("header",L,[(0,o.Lk)("nav",x,[t[3]||(t[3]=(0,o.Lk)("div",{class:"brand"},[(0,o.Lk)("img",{src:y,alt:"Logo",class:"logo-img"}),(0,o.Lk)("span",{class:"brand-text"},"Melbourne Traffic")],-1)),(0,o.Lk)("div",w,[(0,o.bF)(i,{to:"/","exact-active-class":"active"},{default:(0,o.k6)(()=>t[0]||(t[0]=[(0,o.eW)("Home",-1)])),_:1,__:[0]}),(0,o.bF)(i,{to:"/insights","active-class":"active"},{default:(0,o.k6)(()=>t[1]||(t[1]=[(0,o.eW)("Data Insights",-1)])),_:1,__:[1]}),(0,o.bF)(i,{to:"/parking","active-class":"active"},{default:(0,o.k6)(()=>t[2]||(t[2]=[(0,o.eW)("Real-time parking information",-1)])),_:1,__:[2]})])])])}var _={name:"HeaderBar"};const I=(0,h.A)(_,[["render",C],["__scopeId","data-v-2b36ac05"]]);var P=I,S={name:"HomeView",components:{HeaderBar:P}};const M=(0,h.A)(S,[["render",v],["__scopeId","data-v-687615ca"]]);var A=M,E=a(33);const T={class:"insights-page"},R={class:"container"},O={class:"card-grid"},F={class:"card"},U={class:"card-body"},j={ref:"vehicleChart"},D={class:"card"},N={class:"card-body"},$={ref:"popChart"},V={class:"analysis-grid"},z={class:"analysis-box"},W={key:0},X={class:"analysis-box"},B={key:0};function H(e,t,a,r,s,n){const i=(0,o.g2)("HeaderBar");return(0,o.uX)(),(0,o.CE)("div",T,[(0,o.bF)(i),(0,o.Lk)("main",R,[t[15]||(t[15]=(0,o.Lk)("h1",null,"Let Data tells Melbourne's traffic situation",-1)),(0,o.Lk)("div",O,[(0,o.Lk)("section",F,[t[0]||(t[0]=(0,o.Lk)("div",{class:"card-header"},[(0,o.Lk)("span",{class:"small-text"},"Melbourne Car ownership")],-1)),(0,o.Lk)("div",U,[(0,o.Lk)("canvas",j,null,512)])]),(0,o.Lk)("section",D,[t[1]||(t[1]=(0,o.Lk)("div",{class:"card-header"},[(0,o.Lk)("span",{class:"small-text"},"Melbourne population growth")],-1)),(0,o.Lk)("div",N,[(0,o.Lk)("canvas",$,null,512)])])]),(0,o.Lk)("div",V,[(0,o.Lk)("div",z,[t[4]||(t[4]=(0,o.Lk)("p",null,"High Vehicle Count - Victoria has had the second-highest number of passenger motor vehicles in Australia, and that number always keeps on growing year-on-year.",-1)),t[5]||(t[5]=(0,o.Lk)("p",null,"Fewer Cars Leaving the Roads - The attrition rate (cars being deregistered) is decreasing, which means older vehicles are staying in use for longer periods.",-1)),t[6]||(t[6]=(0,o.Lk)("p",null,"Old and New Cars Together - Combination of old and new cars keep the overall number of vehicles in the city consistently high.",-1)),t[7]||(t[7]=(0,o.Lk)("p",null,"Impact on Daily Life - More number of vehicles contribute to heavier traffic and fewer available parking spots, especially during peak hours.",-1)),s.metaVehicle?((0,o.uX)(),(0,o.CE)("p",W,[t[2]||(t[2]=(0,o.eW)(" Total growth: ",-1)),(0,o.Lk)("strong",null,(0,E.v_)((100*s.metaVehicle.total_growth).toFixed(2))+"%",1),t[3]||(t[3]=(0,o.eW)(" | Peak year: ",-1)),(0,o.Lk)("strong",null,(0,E.v_)(s.metaVehicle.peak_year),1)])):(0,o.Q3)("",!0)]),(0,o.Lk)("div",X,[t[11]||(t[11]=(0,o.Lk)("p",null,"Population Growth - Victorias population has increased over the past two decades, adding more than 1.7 million people since 2001, with Greater Melbourne accounting for most of that growth.",-1)),t[12]||(t[12]=(0,o.Lk)("p",null,"Melbournes Domination - Around 75% of Victorias population lives in Melbourne, meaning more people are competing for the same city space and resources.",-1)),t[13]||(t[13]=(0,o.Lk)("p",null,"CBD Pressure Rising - The concentration of people in and around Melbourne’s CBD has steadily increased, driving up demand for parking, housing, and transport during peak periods.",-1)),t[14]||(t[14]=(0,o.Lk)("p",null,"Shared Challenge - These numbers show that parking difficulty is not bad luck for the drivers. It’s a shared challenge.",-1)),s.metaPop?((0,o.uX)(),(0,o.CE)("p",B,[t[8]||(t[8]=(0,o.eW)(" Growth rate: ",-1)),(0,o.Lk)("strong",null,(0,E.v_)((100*s.metaPop.growth_rate).toFixed(2))+"%",1),t[9]||(t[9]=(0,o.eW)(" | Density 2021: ",-1)),(0,o.Lk)("strong",null,(0,E.v_)(n.formatNumber(s.metaPop.population_density_2021)),1),t[10]||(t[10]=(0,o.eW)(" ppl/km² ",-1))])):(0,o.Q3)("",!0)])])])])}a(4114),a(8111),a(7588),a(1701);var G=a(4736),Z={name:"InsightsView",components:{HeaderBar:P},data(){return{metaVehicle:null,metaPop:null,charts:[]}},methods:{formatNumber(e){return e||0===e?Math.round(e).toLocaleString():"—"},drawCharts(e,t,a,r){this.charts.forEach(e=>e.destroy()),this.charts=[],this.charts.push(new G.t1(this.$refs.vehicleChart,{type:"line",data:{labels:e,datasets:[{label:"Vehicles",data:t,borderColor:"#3b82f6",backgroundColor:"rgba(59,130,246,0.2)",tension:.3}]}})),this.charts.push(new G.t1(this.$refs.popChart,{type:"bar",data:{labels:a,datasets:[{label:"Population",data:r,backgroundColor:"#10b981"}]}}))}},async mounted(){try{const e=await i.A.get("/api/insights/vehicle-growth");this.metaVehicle=e.data.meta;const t=e.data.series.map(e=>e.year),a=e.data.series.map(e=>e.registrations),r=await i.A.get("/api/insights/cbd-population");this.metaPop=r.data.meta;const o=r.data.series.map(e=>e.year),s=r.data.series.map(e=>e.population);this.$nextTick(()=>this.drawCharts(t,a,o,s))}catch(e){console.error(e)}},beforeUnmount(){this.charts.forEach(e=>e.destroy())}};const Q=(0,h.A)(Z,[["render",H],["__scopeId","data-v-5163201b"]]);var K=Q;const q={class:"parking-view"},J={class:"mx-auto max-w-6xl px-4 py-12"},Y={class:"mb-8"},ee={class:"flex gap-4 max-w-md"},te=["disabled"],ae={class:"rounded-xl border bg-white p-4 min-h-[500px] mb-6"},re={id:"parking-map",ref:"mapContainer",class:"w-full rounded-lg border-2 border-gray-400",style:{height:"500px","background-color":"#f3f4f6",position:"relative"}},oe={class:"mt-4 p-2 bg-gray-100 rounded text-sm"},se={key:0,class:"mb-6"},ne={class:"bg-green-50 border border-green-200 rounded-lg p-4"},ie={class:"text-lg font-semibold text-green-800 mb-2"},le={class:"text-green-700"},ce={class:"font-bold"},de={class:"font-bold"},pe={key:1,class:"mb-6"},ue={key:2,class:"mb-6"},he={class:"bg-red-50 border border-red-200 rounded-lg p-4"},ge={class:"text-red-700"},me={key:3,class:"bg-white rounded-lg p-4 border"},be={class:"font-semibold mb-3 text-lg"},ke={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3 max-h-60 overflow-y-auto"},fe=["onClick"],ve={class:"font-medium text-blue-600"},ye={class:"text-gray-600"},Le={class:"text-gray-600 text-xs"},xe={class:"text-green-600 font-medium"};function we(e,t,a,s,n,i){const l=(0,o.g2)("HeaderBar");return(0,o.uX)(),(0,o.CE)("div",q,[(0,o.bF)(l),(0,o.Lk)("main",J,[t[12]||(t[12]=(0,o.Lk)("h1",{class:"text-3xl md:text-5xl font-extrabold tracking-tight text-gray-900 mb-6"}," Real-time parking information ",-1)),t[13]||(t[13]=(0,o.Lk)("p",{class:"text-lg text-gray-600 max-w-3xl mb-10"}," View live parking availability and guidance for Melbourne CBD. We use real-time sensors and traffic data to help drivers find the nearest parking spots quickly, reducing congestion and emissions. ",-1)),(0,o.Lk)("div",Y,[(0,o.Lk)("div",ee,[(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>n.searchStreet=e),onKeyup:t[1]||(t[1]=(0,r.jR)((...e)=>i.searchParking&&i.searchParking(...e),["enter"])),type:"text",placeholder:"Enter street name or zone (e.g., 7394)",class:"flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},null,544),[[r.Jo,n.searchStreet]]),(0,o.Lk)("button",{onClick:t[2]||(t[2]=(...e)=>i.searchParking&&i.searchParking(...e)),disabled:n.loading||!n.searchStreet.trim(),class:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed"},(0,E.v_)(n.loading?"Searching...":"Search"),9,te)])]),(0,o.Lk)("div",ae,[t[6]||(t[6]=(0,o.Lk)("h3",{class:"text-lg font-semibold mb-4"},"Melbourne Parking Map",-1)),(0,o.Lk)("div",re,t[3]||(t[3]=[(0,o.Lk)("div",{class:"absolute inset-0 flex items-center justify-center text-gray-500"}," Loading map... ",-1)]),512),(0,o.Lk)("div",oe,[(0,o.Lk)("p",null,[t[4]||(t[4]=(0,o.Lk)("strong",null,"Debug:",-1)),(0,o.eW)(" Map status: "+(0,E.v_)(n.map?"Initialized":"Not initialized"),1)]),(0,o.Lk)("p",null,[t[5]||(t[5]=(0,o.Lk)("strong",null,"Leaflet:",-1)),(0,o.eW)(" "+(0,E.v_)("undefined"!==typeof e.L?"Loaded":"Not loaded"),1)])])]),n.searchResults?((0,o.uX)(),(0,o.CE)("div",se,[(0,o.Lk)("div",ne,[(0,o.Lk)("h3",ie,' Search Results for "'+(0,E.v_)(n.searchResults.searchTerm)+'" ',1),(0,o.Lk)("p",le,[(0,o.Lk)("span",ce,(0,E.v_)(n.searchResults.availableSpots),1),t[7]||(t[7]=(0,o.eW)(" available spots out of ",-1)),(0,o.Lk)("span",de,(0,E.v_)(n.searchResults.totalSpots),1),t[8]||(t[8]=(0,o.eW)(" total spots ",-1))])])])):(0,o.Q3)("",!0),n.loading?((0,o.uX)(),(0,o.CE)("div",pe,t[9]||(t[9]=[(0,o.Lk)("div",{class:"bg-blue-50 border border-blue-200 rounded-lg p-4"},[(0,o.Lk)("div",{class:"flex items-center"},[(0,o.Lk)("div",{class:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600 mr-3"}),(0,o.Lk)("p",{class:"text-blue-700"},"Loading parking data...")])],-1)]))):(0,o.Q3)("",!0),n.error?((0,o.uX)(),(0,o.CE)("div",ue,[(0,o.Lk)("div",he,[t[10]||(t[10]=(0,o.Lk)("h3",{class:"text-lg font-semibold text-red-800 mb-2"},"Error",-1)),(0,o.Lk)("p",ge,(0,E.v_)(n.error),1)])])):(0,o.Q3)("",!0),n.searchResults&&n.searchResults.data.spots&&n.searchResults.data.spots.length>0?((0,o.uX)(),(0,o.CE)("div",me,[(0,o.Lk)("h4",be,"Available Parking Spots ("+(0,E.v_)(n.searchResults.data.spots.length)+")",1),(0,o.Lk)("div",ke,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(n.searchResults.data.spots,e=>((0,o.uX)(),(0,o.CE)("div",{key:e.kerbsideId,class:"bg-gray-50 p-3 rounded border text-sm hover:bg-gray-100 cursor-pointer",onClick:t=>i.focusOnSpot(e)},[(0,o.Lk)("div",ve,"Spot ID: "+(0,E.v_)(e.kerbsideId),1),(0,o.Lk)("div",ye,"Zone: "+(0,E.v_)(e.zoneNumber),1),(0,o.Lk)("div",Le,(0,E.v_)(e.lat?.toFixed(6))+", "+(0,E.v_)(e.lng?.toFixed(6)),1),(0,o.Lk)("div",xe,"✓ "+(0,E.v_)(e.status),1)],8,fe))),128))]),t[11]||(t[11]=(0,o.Lk)("p",{class:"text-sm text-gray-500 mt-3"}," Click on a parking spot to focus on it on the map ",-1))])):(0,o.Q3)("",!0)])])}let Ce;try{Ce=a(3481),a(6689),console.log("Leaflet imported successfully")}catch(Ae){console.error("Failed to import Leaflet:",Ae)}Ce&&(delete Ce.Icon.Default.prototype._getIconUrl,Ce.Icon.Default.mergeOptions({iconRetinaUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon-2x.png",iconUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon.png",shadowUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-shadow.png"}));var _e={name:"ParkingView",components:{HeaderBar:P},data(){return{searchStreet:"",loading:!1,searchResults:null,error:null,map:null,markers:[],apiUrl:"https://ccj3gsn6fl.execute-api.ap-southeast-2.amazonaws.com/prod"}},mounted(){this.$nextTick(()=>{this.initializeMap()})},beforeUnmount(){this.map&&this.map.remove()},methods:{initializeMap(){if(console.log("=== MAP INITIALIZATION DEBUG ==="),"undefined"!==typeof Ce)try{const e=this.$refs.mapContainer;if(console.log("Container element:",e),!e)return void console.error("MAP CONTAINER NOT FOUND!");e.innerHTML="",console.log("Creating Leaflet map..."),this.map=Ce.map(e,{center:[-37.8136,144.9631],zoom:13,scrollWheelZoom:!0,zoomControl:!0,attributionControl:!0}),console.log("Map object created:",this.map);const t=Ce.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:"© OpenStreetMap contributors",maxZoom:19});t.addTo(this.map),console.log("Tile layer added");Ce.marker([-37.8136,144.9631]).addTo(this.map).bindPopup("MAP IS WORKING!<br>Melbourne CBD<br>Search for parking above");console.log("Test marker added"),setTimeout(()=>{this.map&&(this.map.invalidateSize(),console.log("MAP INITIALIZED SUCCESSFULLY!"))},200)}catch(Ae){console.error("MAP INITIALIZATION FAILED:",Ae)}else console.error("LEAFLET NOT FOUND! Install with: npm install leaflet")},async searchParking(){if(this.searchStreet.trim()){this.loading=!0,this.error=null,this.searchResults=null,this.clearMarkers();try{console.log("Searching for:",this.searchStreet);const e=await fetch(`${this.apiUrl}/parking?street=${encodeURIComponent(this.searchStreet)}`,{method:"GET",headers:{"Content-Type":"application/json",Accept:"application/json"}});if(!e.ok)throw new Error(`API request failed: ${e.status} ${e.statusText}`);const t=await e.json();console.log("API Response:",t),t.success?(this.searchResults=t,t.data.lat&&t.data.lng&&this.centerMap(t.data.lat,t.data.lng),t.data.spots&&t.data.spots.length>0&&this.addParkingMarkers(t.data.spots)):this.error=t.error||"Failed to fetch parking data"}catch(e){console.error("Search error:",e),console.error("API URL being called:",`${this.apiUrl}?street=${encodeURIComponent(this.searchStreet)}`),this.error=`Failed to connect to parking service: ${e.message}`}finally{this.loading=!1}}},centerMap(e,t){if(this.map){this.map.setView([e,t],16);const a=Ce.marker([e,t],{icon:Ce.divIcon({html:'<div style="background-color: #3b82f6; width: 20px; height: 20px; border-radius: 50%; border: 3px solid white;"></div>',iconSize:[20,20],className:"custom-div-icon"})}).addTo(this.map);a.bindPopup(`Search Center: ${this.searchStreet}`),this.markers.push(a)}},addParkingMarkers(e){this.map&&(e.forEach(e=>{const t=Ce.divIcon({html:'\n            <div style="\n              background-color: #10b981; \n              color: white; \n              width: 30px; \n              height: 30px; \n              border-radius: 50%; \n              border: 2px solid white;\n              display: flex;\n              align-items: center;\n              justify-content: center;\n              font-weight: bold;\n              font-size: 12px;\n              box-shadow: 0 2px 4px rgba(0,0,0,0.3);\n            ">P</div>\n          ',iconSize:[30,30],className:"parking-spot-icon"}),a=Ce.marker([e.lat,e.lng],{icon:t}).addTo(this.map),r=`\n          <div style="font-family: sans-serif;">\n            <h4 style="margin: 0 0 8px 0; color: #1f2937;">Parking Spot</h4>\n            <p style="margin: 4px 0;"><strong>Spot ID:</strong> ${e.kerbsideId}</p>\n            <p style="margin: 4px 0;"><strong>Zone:</strong> ${e.zoneNumber}</p>\n            <p style="margin: 4px 0;"><strong>Status:</strong> <span style="color: #10b981; font-weight: bold;">${e.status}</span></p>\n            <p style="margin: 4px 0; font-size: 12px; color: #6b7280;">\n              ${e.lat.toFixed(6)}, ${e.lng.toFixed(6)}\n            </p>\n          </div>\n        `;a.bindPopup(r),this.markers.push(a)}),console.log(`Added ${e.length} parking markers to map`))},clearMarkers(){this.markers.forEach(e=>{this.map.removeLayer(e)}),this.markers=[]},focusOnSpot(e){this.map&&(this.map.setView([e.lat,e.lng],18),this.markers.forEach(t=>{const a=t.getLatLng();Math.abs(a.lat-e.lat)<1e-4&&Math.abs(a.lng-e.lng)<1e-4&&t.openPopup()}))}}};const Ie=(0,h.A)(_e,[["render",we],["__scopeId","data-v-7947161e"]]);var Pe=Ie;const Se=[{path:"/",name:"Home",component:A},{path:"/insights",name:"Insights",component:K},{path:"/parking",name:"Parking",component:Pe}];var Me=(0,b.aE)({history:(0,b.LA)(),routes:Se});(0,r.Ef)(m).use(Me).mount("#app")}},t={};function a(r){var o=t[r];if(void 0!==o)return o.exports;var s=t[r]={exports:{}};return e[r].call(s.exports,s,s.exports,a),s.exports}a.m=e,function(){var e=[];a.O=function(t,r,o,s){if(!r){var n=1/0;for(d=0;d<e.length;d++){r=e[d][0],o=e[d][1],s=e[d][2];for(var i=!0,l=0;l<r.length;l++)(!1&s||n>=s)&&Object.keys(a.O).every(function(e){return a.O[e](r[l])})?r.splice(l--,1):(i=!1,s<n&&(n=s));if(i){e.splice(d--,1);var c=o();void 0!==c&&(t=c)}}return t}s=s||0;for(var d=e.length;d>0&&e[d-1][2]>s;d--)e[d]=e[d-1];e[d]=[r,o,s]}}(),function(){a.d=function(e,t){for(var r in t)a.o(t,r)&&!a.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){a.p="/static/"}(),function(){var e={524:0};a.O.j=function(t){return 0===e[t]};var t=function(t,r){var o,s,n=r[0],i=r[1],l=r[2],c=0;if(n.some(function(t){return 0!==e[t]})){for(o in i)a.o(i,o)&&(a.m[o]=i[o]);if(l)var d=l(a)}for(t&&t(r);c<n.length;c++)s=n[c],a.o(e,s)&&e[s]&&e[s][0](),e[s]=0;return a.O(d)},r=self["webpackChunkmelbourne_parking_frontend"]=self["webpackChunkmelbourne_parking_frontend"]||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))}();var r=a.O(void 0,[504],function(){return a(7433)});r=a.O(r)})();
//# sourceMappingURL=app.d0f6b3a2.js.map